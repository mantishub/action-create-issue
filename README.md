# MantisHub Create Issue GitHub Action

There can be cases where it makes sense to create issues in MantisHub from GitHub actions. For
example:
- After creating a new release, create a work item for follow-up steps.
- When build breaks, open a work item to fix it.
- Certain workflow that is manually creating and includes some manual work to be done as a follow-up.

### Usage
To use this action in your GitHub workflow, add the following step to your workflow file:

```yaml
jobs:
  create-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4
        with:
          repository: vboctor/action-create-issue
      - name: Run Create Issue Action
        id: create-issue
        uses: vboctor/action-create-issue@v1
        with:
          url: https://example.mantishub.io
          api-key: ${{ secrets.API_KEY }}
          project: 'MyProject'
          summary: "Build is broken"
          description: |
            Unable to submit form.
            Page loading error
          category: 'General'

 ```
### Example workflow file
This workflow demonstrates how to use the action-create-issue in a GitHub Actions pipeline to update an existing release issue and create a new one in a MantisHub project. The workflow checks out the code, runs the custom action, and retrieves the new issue ID, showcasing effective issue management automation.
#### Using Step ID to Fetch Outputs in GitHub Actions
In GitHub Actions, you can use the id field to assign a unique identifier to a step within a job. This identifier allows you to reference the outputs of that step in subsequent steps within the same job.
For example, in the workflow below, the step Run Create issue Action is assigned the ID create-issue. Later, the output issue-id generated by this step can be accessed using the syntax `${{ steps.create-issue.outputs.issue-id }`} in the Get new issue id step.

```yaml
name: "MantisHub Example Workflow"

on:
  workflow_dispatch:
jobs:
  create-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4
        with:
          repository: vboctor/action-create-issue
      - name: Run Create issue Action
        id: create-issue
        uses: vboctor/action-create-issue@v1
        with:
          url: 'https://example.mantishub.io'
          api-key: {{some-token}}
          project: 'MyProject'
          summary: 'Form Validation Error on Checkout Page'
          description: |
            When a user tries to submit the checkout form without entering a valid email address,
            he form submission fails silently without displaying any error message.
          category: 'General'  
      - name: Get new issue id 
        run: echo  ${{ steps.create-issue.outputs.issue-id }}
```
